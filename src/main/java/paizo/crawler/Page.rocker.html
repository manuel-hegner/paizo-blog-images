
@import java.util.List

@args (String key, List<BlogPost> posts, List<String> groups)

<!DOCTYPE html>
<html lang="en">
	<head>
	    <meta charset="UTF-8">
	    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	    <meta http-equiv="X-UA-Compatible" content="ie=edge">
	    <title>Paizo Blog Images @key</title>
	    <style>
			body {
				font-family: arial;
			}
			
			.tag {
				background-color: lightgray;
				padding: .2rem .4rem;
				border-radius: .4rem;
			}
			
			.g2 {
				grid-template-columns: 1fr 1fr;
				display: grid;
				grid-gap: 1rem;
			}
			
			.w100 {
				width: 100%;
			}
			
			img {
				max-height: 30rem;
				max-width: 100%;
			}
			
			.raw-text {
				height: 30rem;
			}
			
			.not-uploaded {
				background-color: lightsalmon;
			}
		</style>
	</head>
	<body>
	<div>
	@for(String gr : groups) {
		<a href="@(gr).html">@gr</a>
	}
	</div>
	@for(BlogPost post : posts) {
	<div>
		<h3>
			@post.getDate().getYear()-@post.getDate().getMonthValue()-@post.getDate().getDayOfMonth()
			- 
			<a href="https://paizo.com/community/blog/@post.getId()">
			@post.getTitle()
			</a>
		</h3>
		@if(post.getTags() != null) {
		<div>
			@for(String tag : post.getTags()) {
				<span class="tag">@tag</span>
			}
		</div>
		}
		<br>
		@if(post.getImages() != null) {
		<div>
		@for(BlogImage img : post.getImages()) {
			<div class="w100 g2 @if(img.getWikiImage() == null) {not-uploaded}">
				@with(String link = "https://github.com/manuel-hegner/paizo-blog-images/raw/main/blog_post_images/"+img.getName()) {
					<div>
						<a href="@link" download>
							<img src="@link">
						</a><br>
						@if(img.getWikiImage() != null) {
							Already uploaded as <a href="https://pathfinderwiki.com/wiki/@img.getWikiImage()">@img.getWikiImage()</a>
						} else {
							Not yet uploaded to <a href="https://pathfinderwiki.com/wiki/Special:Upload">Wiki</a>
						}
					</div>
				}
				<textarea readonly class="w100 raw-text">@ImageDownloader.wikitext(post, img)</textarea>
			</div>
		}
		</div>
		}
	</div>
	}
	</body>
</html>
